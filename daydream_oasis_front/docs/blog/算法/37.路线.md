
<BlogInfo title="37.路线" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=0分27秒 category="算法" tag_list="['算法']" create_time="2022.05.07 17:49:00" update_time="2022.05.07 18:07:27" />

```python
n, m, p = map(int, input().split(' '))

from itertools import permutations

lines_price_dic = {}
for i in range(m):
    u, v, k = map(int, input().split(' '))
    if k <= p:
        lines_price_dic[f'{u}-{v}'] = k  # u点和v点之间的难度

N = 0
for i in range(len(lines_price_dic) + 1):
    for per in permutations(lines_price_dic):
        for i in range(len(per)):
            start, stop = per[i].split('-')
            start2, stop2 = per[i + 1].split('-')
            if stop != start2:
                break
        else:
            N += 1
print(N)

```
