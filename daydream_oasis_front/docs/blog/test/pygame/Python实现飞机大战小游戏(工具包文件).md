
<BlogInfo title="Python实现飞机大战小游戏(工具包文件)" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=136 category="pygame" tag_list="['飞机大战', 'game']" create_time="2021.06.26 21:42:23.821740" update_time="2021.06.26 21:42:23" />

^^^^^^^^^
<pre>import pygame<br>import random<br><br># 定义屏幕常量<br># SCREEN_RECT = pygame.Rect(0, 0, 1200, 1080)<br>SCREEN_RECT = pygame.Rect(0, 0, 1200, 800)<br># 定义刷新的帧率的常量<br>FRAME_PER_SEC = 60<br># 创建敌机的定时常量<br>CREAT_ENEMY_EVENT = pygame.USEREVENT<br><br># 英雄发射子弹事件<br>HERO_FIRE_EVENT = pygame.USEREVENT + 1<br><br># 背景音乐常量<br>BGM = pygame.USEREVENT + 2<br><br><br>class GameSprite(pygame.sprite.Sprite):<br>    """飞机大战的游戏精灵"""<br><br>    def __init__(self, image_name, speed=1):<br>        # 当某一个子类的父类不是object基类时，一定要在初始化<br>        # 方法中，主动调用父类的初始化方法<br>        # 调用父类初始化方法<br>        super().__init__()<br><br>        # 定义对象的属性<br>        # 图像 从图像文件中加载数据，并传给image<br>        self.image = pygame.image.load(image_name)<br>        # 位置 调用get_rect（）方法，返回位置信息，并用变量rect记录<br>        self.rect = self.image.get_rect()<br>        # 速度 默认速度为1<br>        self.speed = speed<br><br>    def update(self):<br>        # 在屏幕的垂直方向移动<br>        self.rect.y += self.speed<br><br><br>class Background(GameSprite):  # 继承自精灵类<br>    """游戏背景精灵"""<br><br>    def __init__(self, is_alt=False):<br><br>        # 1.调用父类方法实现精灵创建<br>        super().__init__("./images/background2.jpg")<br><br>        # 2判断是否为交替图像，如果是，需要设置初始位置<br>        if is_alt:<br>            self.rect.y = -self.rect.height<br><br>    # 重写父类的方法<br>    def update(self):<br><br>        # 1.调用父类的方法实现（垂直方向的移动）<br>        super().update()<br><br>        # 2.判断是否移出屏幕，如果移出，将图像设置在屏幕的正上方<br>        if self.rect.y &gt;= SCREEN_RECT.height:<br>            self.rect.y = -self.rect.height<br><br><br># 定义Enemy类<br>class Enemy(GameSprite):<br>    """敌机精灵"""<br><br>    def __init__(self):<br><br>        # self.image = pygame.image.load(path)<br><br>        # 1.调用父类方法，创建敌机精灵，同时指定敌机图片<br><br>        a = random.randint(0, 2)<br><br>        if a == 0:<br>            super().__init__("./images/enemy1.png")<br><br>        elif a == 1:<br>            super().__init__("./images/enemy2.png")<br><br>        else:<br>            super().__init__("./images/enemy3.png")<br><br>        # super().__init__("enemies_list[0]")<br><br>        # super().__init__("./images/enemy2.png")<br><br>        # 2.指定敌机的初始速度 1~3<br>        self.speed = random.randint(1, 4)<br><br>        # 3.指定敌机的初始位置<br>        self.rect.bottom = 0<br>        self.rect.x = random.randint(0, SCREEN_RECT.width - self.rect.width)<br><br>    def update(self):<br><br>        # 1.调用父类的方法，保持垂直方向的飞行<br>        super().update()<br><br>        # 2判断是否飞出屏幕，如果飞出屏幕，kill该精灵<br>        if self.rect.y &gt; SCREEN_RECT.height:<br>            # print("删除该敌机精灵")<br>            # 删除该敌机，释放内存<br>            self.kill()<br><br>    def __del__(self):<br>        # print("敌机挂了%s"%self.rect)<br>        pass<br><br><br>class Hero(GameSprite):<br>    """英雄精灵"""<br><br>    def __init__(self):<br><br>        # 1.调用父类方法，设置image，speed<br>        super().__init__("./images/hero.png", 0)<br><br>        # 2.英雄的初始位置<br>        self.rect.centerx = SCREEN_RECT.centerx<br>        self.rect.bottom = SCREEN_RECT.bottom - 120<br><br>        # 创建子弹的精灵组<br>        self.bullets = pygame.sprite.Group()<br><br>    def update(self):<br>        """控制英雄不能离开屏幕"""<br><br>        if self.rect.x &lt; 0:<br>            self.rect.x = 0<br><br>        elif self.rect.right &gt; SCREEN_RECT.right:<br>            self.rect.right = SCREEN_RECT.right<br><br>        elif self.rect.y &lt;= 0:<br>            self.rect.y = 0<br><br>        elif self.rect.y &gt;= SCREEN_RECT.height - self.rect.height:<br>            self.rect.y = SCREEN_RECT.height - self.rect.height<br><br>    def fire(self):<br>        # print("发射子弹")<br><br>        for i in (0, 1, 2):<br>            # 一次性发射3颗子弹<br>            # 1.创建子弹精灵<br>            bullet = Bullet()<br><br>            # 设置子弹的位置<br>            bullet.rect.bottom = self.rect.y - i * 20<br>            bullet.rect.centerx = self.rect.centerx<br><br>            # 把子弹精灵添加到子弹精灵组<br>            self.bullets.add(bullet)<br><br><br>class Bullet(GameSprite):<br>    """子弹精灵"""<br><br>    def __init__(self):<br><br>        # 调用父类方法，设置子弹的图片，速度<br><br>        super().__init__("./images/bullet1.png", -6)<br>        keys_pressed = pygame.key.get_pressed()<br>        if keys_pressed[pygame.K_l]:  # 大招:<br>            super().__init__("./images/bullet2-4.png", -6)<br><br>    def update(self):<br><br>        # 调用父类方法，让子弹沿着垂直方向飞行<br>        super().update()<br><br>        # 判断子弹是否飞出屏幕<br>        # 删除子弹<br>        if self.rect.bottom &lt; 0:<br>            self.kill()<br><br>    def __del__(self):<br>        pass<br>        # print("子弹被销毁")<br></pre><p><br></p>
