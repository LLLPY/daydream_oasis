
<BlogInfo title="室友1把王者的时间写出了快速排序？" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=212 category="排序算法" tag_list="['排序算法']" create_time="2022.04.29 12:37:21.520484" update_time="2022.04.29 12:37:21" />

^^^^^^^^^
<h1>&nbsp;前言</h1>

<p><strong>&quot;欢迎来到王者荣耀，敌军还有5秒钟达到战场！请做好准备！&quot;</strong></p>

<p class="img-center" data-widget="image"><span><img alt="" src="https://img-blog.csdnimg.cn/24002df47474458982ad5d120ca8d923.png" style="height:240px; width:240px" /><span title="点击并拖拽以改变尺寸">​</span></span></p>

<p>&nbsp;</p>

<p>战争的号角已吹响！<img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/a1f95ff575b447d8b9af66928d095f1a.png" style="height:23px; width:23px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/a1f95ff575b447d8b9af66928d095f1a.png" style="height:23px; width:23px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/a1f95ff575b447d8b9af66928d095f1a.png" style="height:23px; width:23px" /></p>

<p>本次我方上场的英雄有：小鲁班，诸葛亮，廉颇，韩信，后羿。</p>

<p><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/cf200ffea9f24f4d8af87bb47a2f083d.png" style="height:123px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/36d38e30626d4382b015c5d359a7c21b.png" style="height:129px; width:60px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/340f264a487b4a97a581b00fd04ace09.png" style="height:100px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/604ae0dc020c4db5ac7a1c0547484f7d.png" style="height:133px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/8ead6b2ae82845c7a65efb197145aa50.png" style="height:135px; width:100px" /></p>

<p>&nbsp;</p>

<p>还没走出泉水，机智的诸葛亮就率先提出作战策略：游戏可以输，姿势一定要帅！看咱现在这站位，高高低低，乘次不齐，一点排面都没有！</p>

<p class="img-center" data-widget="image"><span><img alt="" src="https://img-blog.csdnimg.cn/5c772c386ac34c018510eb2e05bb2d95.png" style="height:240px; width:240px" /><span title="点击并拖拽以改变尺寸">​</span></span></p>

<p>&nbsp;韩信也马上补充道：&ldquo;没错！你看这个廉颇，又矮又胖，他还站在C位，你说这像话吗？？？&rdquo;</p>

<p>（此时，站在一旁的小鲁班悄悄地想旁边挪了一下）</p>

<p>憨厚的廉颇：我 我。。。</p>

<p>诸葛亮扶了扶眼镜框马上补充道：在座的各位，有没有觉得自己数学好一点的？</p>

<p>（全场寂静了一分钟。。。）</p>

<p>诸葛亮清了清嗓子，再次扶了扶眼镜框，说道：我也当了几十年的数学老师了，黄金分割率就是我提出来的，要不我提个意见怎么样？</p>

<p>（寂静了片刻。。。）</p>

<p>站在一旁的后羿默默地支了一声：也行吧！其他人也一一应和：可以。。。</p>

<p>于是诸葛亮马上又补充道：以我为基准，比我矮的站在我的左边，比我高的站在我的右边。</p>

<p>话音刚落：廉颇就默默地走到了小鲁班的右边，韩信和后羿依次站在了诸葛亮的右边，诸葛亮站到了C位！</p>

<p><strong>现在的站位如下：</strong></p>

<p>&nbsp;<img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/cf200ffea9f24f4d8af87bb47a2f083d.png" style="height:123px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/340f264a487b4a97a581b00fd04ace09.png" style="height:100px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/36d38e30626d4382b015c5d359a7c21b.png" style="height:129px; width:60px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/604ae0dc020c4db5ac7a1c0547484f7d.png" style="height:133px; width:100px" /><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/8ead6b2ae82845c7a65efb197145aa50.png" style="height:135px; width:100px" /></p>

<p>调皮的小鲁班称赞道：喔！诸葛亮哥哥真厉害，咱们现在不仅是排面杠杆滴！这阵容路线也到位！我和廉颇爷爷个子比较矮，但我的输出高，而廉颇爷爷抗伤能力强，所以我们适合走发育路；而后羿大叔腿子长，输出也还不错，走对抗路也还不错；韩信哥哥更是走位灵活，适合打野发育抓人；诸葛亮哥哥神机妙算，法术高强，走中路再适合不过啦！</p>

<p>韩信也忍不住鼓起了掌声：看你小子个儿不高，脑子还挺灵活的，这波分析杠杆滴！</p>

<p class="img-center" data-widget="image"><span><img alt="" src="https://img-blog.csdnimg.cn/6d74736d0a5145a68edf5609812084f7.gif" style="height:192px; width:240px" /><span title="点击并拖拽以改变尺寸">​</span></span></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<h1>言归正传</h1>

<p>看到诸葛亮的作战策略，不经让我浮想联翩，此情此景似乎在哪里见过？</p>

<p>咦？</p>

<p>这不正是快速排序的核心思想吗？</p>

<p>&nbsp;</p>

<h1>思路</h1>

<blockquote>
<p># 思路&nbsp; 每次排序时，取一个参考元素mid_val，将小于mid_val的元素放到它的左边，将大于mid_val的元素放到它的右边</p>

<p>之后，再分别对在mid_val两边的元素分别进行如上操作</p>

<p>&nbsp;</p>

<p>结束条件：分组后的元素个数小于等于1&nbsp;</p>
</blockquote>

<p>&nbsp;</p>

<p>如果理解了上面的内容，那么你就已经拿下一血了！！</p>

<p class="img-center" data-widget="image"><span><img alt="" isbindedload="true" src="https://img-blog.csdnimg.cn/c6e536cd95d54de580d5fd5cd91c7b85.png" style="height:197px; width:700px" /><span title="点击并拖拽以改变尺寸">​</span></span></p>

<h1>&nbsp;思路简化</h1>

<pre data-widget="codeSnippet">
<code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="function_ hljs-title">quick_sort</span>(<span class="hljs-params">li, left, right</span>):
    <span class="hljs-keyword">if</span> left &lt; right:  <span class="hljs-comment"># 至少两个元素</span>
        mid = partition(li, left, right) <span class="hljs-comment">#原子操作 每次操作后[left,right]区间内的元素，mid左边的都比mid小；mid右边的都比mid大</span>
        quick_sort(li, left, mid - <span class="hljs-number">1</span>)  <span class="hljs-comment"># 对mid左边的进行排序</span>
        quick_sort(li, mid + <span class="hljs-number">1</span>, right)  <span class="hljs-comment"># 对mid右边的进行排序</span></code></pre>

<p>将策略分为3步走：</p>

<ol>
	<li><strong>输入区间，得出mid值</strong></li>
	<li><strong>操作mid左边的值</strong></li>
	<li><strong>操作mid右边的值</strong></li>
</ol>

<p>这样思路就清晰了很多！double kill！</p>

<p><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/c6526570c1ea454893783119d66c8e20.png" style="height:215px; width:700px" /></p>

<p>&nbsp;</p>

<h1>&nbsp;原子操作</h1>

<p>最后就是解决这个原子操作的问题了！</p>

<p>列出原子操作的核心功能：</p>

<ol>
	<li><strong>输入区间</strong></li>
	<li><strong>排序区间</strong></li>
	<li><strong>返回mid</strong></li>
</ol>

<p>所以来实现一下吧！</p>

<pre data-widget="codeSnippet">
<code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="function_ hljs-title">partition</span>(<span class="hljs-params">li, left, right</span>):
    mid_val = li[left]

    <span class="hljs-keyword">while</span> left &lt; right:  <span class="hljs-comment"># 只要左指针不等于右指针循环就没有结束</span>
        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> li[right] &gt;= mid_val:
            right -= <span class="hljs-number">1</span>
        li[left] = li[right]
        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> li[left] &lt;= mid_val:
            left += <span class="hljs-number">1</span>
        li[right] = li[left]

    li[left] = mid_val
    <span class="hljs-keyword">return</span> left</code></pre>

<blockquote>
<p>Q：外层循环的条件是left&lt;right,为什么内层循环还需要加这个条件？</p>

<p>A：因为内层的循环，left的一直是不减的，right的值是一直不增的，所以两者可能会相遇！</p>
</blockquote>

<h1>手动复现一下这个过程！</h1>

<p><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/e59f1e3c1f304b67bd25c43672116755.png" style="height:1003px; width:900px" /></p>

<p>&nbsp;初始列表：[3,1,4,2,5]</p>

<p>经过一轮的原子操作后，得到mid=2，在mid左边的都小于mid，在mid右边的都大于mid！</p>

<p>符合预期结果！triple kill！</p>

<p><img alt="" data-widget="image" isbindedload="true" src="https://img-blog.csdnimg.cn/4b59ee0a257545dd9902c8444cb5b05e.png" style="height:211px; width:700px" /></p>

<p>&nbsp;</p>

<h1>完整代码</h1>

<pre data-widget="codeSnippet">
<code class="hljs language-python"><span class="hljs-keyword">import</span> sys
sys.setrecursionlimit(<span class="hljs-number">1000000</span>)  <span class="hljs-comment"># 设置递归深度</span>
<span class="hljs-keyword">def</span> <span class="function_ hljs-title">partition</span>(<span class="hljs-params">li, left, right</span>):
    mid_val = li[left]

    <span class="hljs-keyword">while</span> left &lt; right:  <span class="hljs-comment"># 只要左指针不等于右指针循环就没有结束</span>
        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> li[right] &gt;= mid_val:
            right -= <span class="hljs-number">1</span>
        li[left] = li[right]

        <span class="hljs-keyword">while</span> left &lt; right <span class="hljs-keyword">and</span> li[left] &lt;= mid_val:
            left += <span class="hljs-number">1</span>
        li[right] = li[left]

    li[left] = mid_val
    <span class="hljs-keyword">return</span> left


<span class="hljs-keyword">def</span> <span class="function_ hljs-title">quick_sort</span>(<span class="hljs-params">li, left, right</span>):
    <span class="hljs-keyword">if</span> left &lt; right:  <span class="hljs-comment"># 至少两个元素</span>
        mid = partition(li, left, right) <span class="hljs-comment">#原子操作 每次操作后[left,right]区间内的元素，mid左边的都比mid小；mid右边的都比mid大</span>
        quick_sort(li, left, mid - <span class="hljs-number">1</span>)  <span class="hljs-comment"># 对mid左边的进行排序</span>
        quick_sort(li, mid + <span class="hljs-number">1</span>, right)  <span class="hljs-comment"># 对mid右边的进行排序</span></code></pre>

<h1>测试</h1>

<p><img src="../media/image/2022/04/29/image-20220429123636-1.png" style="height:447px; width:900px" /></p>

<p>跑了10w条数据，耗时不到1秒，这效率也是杠杆滴！</p>

<p>&nbsp;</p>

<h1>结束</h1>

<p>&nbsp;突然寝室里整齐的一声：&ldquo;<strong>victory！</strong>&rdquo;</p>

<p>诸葛亮：咦？游戏结束了吗？我还没杀够呢哈哈哈哈</p>

<p>不过快排倒是时学废了哈哈哈</p>

<p>&nbsp;</p>

