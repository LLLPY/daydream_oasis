---

next: false

---



<BlogInfo id="790" title="3.yield配合contextmanager实现上下文管理" author="白日梦想猿" pv=0 read_times=0 pre_cost_time="0分29秒" category="上下文管理器和else块" tag_list="['上下文管理器和else块']" create_time="2022.04.23 15:39:47" update_time="2022.04.23 16:46:10" />

```python
import sys
from contextlib import contextmanager


# 还是实现一个镜像输出
class MirrorOutput:

    @contextmanager
    def mirror_output(self):
        self.output = sys.stdout.write

        def reverse_output(text):
            return self.output(text[::-1])

        sys.stdout.write = reverse_output

        # 分界线以上的作用类似于__enter__方法
        yield "这里是分界线"  # yield产出的值会绑定在as字句的目标变量上
        # 分界线以下的作用类似于__exit__方法
        sys.stdout.write = self.output


if __name__ == '__main__':
    with MirrorOutput().mirror_output() as mo:
        print('好好学习，天天向上！')
        print(mo)
    print('好好学习，天天向上！')

```



<ActionBox />
