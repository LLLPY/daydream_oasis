
<BlogInfo title="6.比较dict和getattr获取属性的快慢" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=0分41秒 category="动态属性和特性" tag_list="['动态属性和特性']" create_time="2022.07.19 08:42:56" update_time="2022.07.19 08:59:10" />

```python
# -*- coding: UTF-8 -*-                            
# @Author  ：LLL                         
# @Date    ：2022/7/19 8:42
from functools import wraps
from time import time


# 理论上直接从__dict__获取会快一些，因为直接通过键索引 而getattr还要调用一次方法
# 不过测试10000000次两者之间才出现0.1秒的差别，所以它们之间的速度差别不大
class A:

    def __init__(self):
        self.name = 'Tom'


# 计时器
def clocked(func):
    @wraps(func)
    def clock(*args, **kwargs):
        time1 = time()
        res = func(*args, **kwargs)
        time2 = time()
        print(f'cost {time2 - time1}s.')
        return res

    return clock


@clocked
def method_dict_get():
    return [A().__dict__['name'] for i in range(num)]


@clocked
def method_getattr():
    return [getattr(A(), 'name') for i in range(num)]


if __name__ == '__main__':
    num = 10000000
    method_dict_get()
    method_getattr()

```
