
<BlogInfo id="499" title="21.生产者消费者模式" author="白日梦想猿" pv=0 read_times=0 pre_cost_time="0分41秒" category="并发编程" tag_list="['并发编程']" create_time="2020.05.08 15:55:33" update_time="2020.05.08 16:11:30" />

```python
from threading import Thread
from queue import Queue
from time import sleep

#使生产者和消费者之间的生产和消费关系平衡

class Producter(Thread):

    def run(self):
        count = 0
        global q
        while True:
            if q.qsize() < 1000:
                for i in range(100):
                    count += 1
                    msg = '生产的第'+str(count)+'个产品'
                    q.put(msg) #一次性生产100个产品
                    print(msg)
                sleep(5)


class Consumer(Thread):
    def run(self):
        global q
        while True:
            if q.qsize() > 100:
                for i in range(50):
                    msg = '消费'+q.get()
                    print(msg)
                sleep(5)



if __name__ == '__main__':

    q = Queue()
    p = Producter()
    c = Consumer()
    p.start()
    sleep(10)
    c.start()
```
