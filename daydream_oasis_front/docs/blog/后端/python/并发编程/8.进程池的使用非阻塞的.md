
<BlogInfo id="820" title="8.进程池的使用非阻塞的" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=0分27秒 category="并发编程" tag_list="['并发编程']" create_time="2020.04.30 15:55:58" update_time="2020.05.22 13:42:27" />

```python
import multiprocessing as mul
from time import sleep

#定义子进程要完成的任务
def func(msg):
    print('start:',msg)
    print('end',msg)
    sleep(3)


if __name__ == '__main__':

    #创建一个初始进程数为3的进程池
    pool = mul.Pool(3)

    #向进程池中添加任务
    for i in range(1,6):
        msg = '任务%d'%i
        pool.apply_async(func,(msg,))


    #如果进程池中不在接受请求，需要调用close
    pool.close()

    #等待子进程的结束
    pool.join()
    print('主进程结束!')

#非阻塞状态下的进程池，可以同时运行多个进程任务
#由运行结果可知，任务1,2,3同时进行，同时结束，任务4,5同时进行，同时结束
#因为进程池的进程数量上限是3，而总共有5个任务需要添加，第一次同时添加，结束3个任务，第二次只能同时添加结束2个任务









```
