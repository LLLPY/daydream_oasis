
<BlogInfo title="19.线程锁" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=0分34秒 category="并发编程" tag_list="['并发编程']" create_time="2020.05.06 15:41:01" update_time="2020.05.06 15:48:12" />

```python
#保证多线程之间共用数据的准确性
import threading

num = 0

#创建一把互斥锁
lock = threading.Lock()


def test1():
    global num
    for i in range(10000000):
        lock.acquire() #上锁
        num += 1
        lock.release() #解锁
    print('test1结束后num的值:', num)


def test2():
    global num
    for i in range(10000000):
        lock.acquire()
        num += 1
        lock.release()
    print('test2结束后num的值:', num)


if __name__ == '__main__':

    # 创建线程
    p1 = threading.Thread(target=test1)
    p2 = threading.Thread(target=test2)
    p1.start()
    p2.start()
    p1.join()
    p2.join()
    print('over!')
    if num != 20000000:
        print('运行结果不正确!!!')
    else:
        print('运行结果正确!-----',num)
```
