
<BlogInfo title="游标的使用" author="白日梦想猿" pv=0 read_times=0 pre_cost_time=40 category="oracle" tag_list="['oracle', '循环语句', 'cursor']" create_time="2021.10.20 09:11:08.264599" update_time="2021.10.20 09:35:18" />

^^^^^^^^^
<p>set serveroutput on;<br><br></p><h2 id="r9zhz">--1.无参游标--查询所有员工的姓名和工资并循环打印</h2>declare<br>--声明游标<br>cursor c_emp is select ename,sal from emp;<br><br>--声明两个变量用来接收ename和sal<br>v_name emp.ename%type;<br>v_sal emp.sal%type;<br><br>begin<br>--打开游标<br>open c_emp;<br><br>--游标赋值，循环打印<br>loop <br>fetch c_emp into v_name,v_sal;<br>dbms_output.put_line('员工姓名:'||v_name||' 员工工资:'||v_sal); <br>if c_emp%notfound then exit;<br>end if;<br>end loop;<br><br>--关闭游标<br>close c_emp;<br>end;<br><br><br><h2 id="dvkj8">--2.有参游标--查询指定部门的员工的姓名和工资并循环打印</h2>declare<br>--声明游标<br>cursor c_emp(v_deptno emp.deptno%type) is select ename,sal from emp where deptno=v_deptno;<br><br>--声明两个变量用来接收ename和sal<br>v_name emp.ename%type;<br>v_sal emp.sal%type;<br><br>begin<br>--打开游标 并给游标赋值<br>open c_emp(20);<br><br>--游标赋值，循环打印<br>loop <br>if c_emp%notfound then exit;<br>fetch c_emp into v_name,v_sal;<br>dbms_output.put_line('员工姓名:'||v_name||' 员工工资:'||v_sal); <br><br>end if;<br>end loop;<br><br>--关闭游标<br>close c_emp;<br>end;<br><p data-we-empty-p=""><br></p><p><h2 id="5fz25"><br>--3.查询每位员工的工资等级salgrade及此等级的平均工资</h2>select ename,grade,(losal+hisal)/2 as 平均工资 from  emp,salgrade where sal between losal and hisal;</p><br><br><br><br><p></p>
