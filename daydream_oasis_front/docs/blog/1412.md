---
sidebar: false
next: false
---
<BlogInfo/>

## å‰è¨€

ä»Šå¤©å’Œå¤§å®¶åˆ†äº«ä¸€ç¯‡å…³äºpythonä»£ç é£æ ¼ç»Ÿä¸€çš„æ–¹æ³•ã€‚æˆ‘è‡ªå·±ä¹‹å‰æœ‰ä½¿ç”¨è¿‡ï¼Œä½†éƒ½æ˜¯ä½¿ç”¨å…¬å¸ç°æˆçš„ï¼Œæ²¡æœ‰è‡ªå·±åŠ¨æ‰‹å»å®æ“ï¼Œæ‰€ä»¥ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿï¼Œä»Šå¤©ä¸“é—¨èŠ±äº†ä¸€ç‚¹æ—¶é—´å»ç ”ç©¶ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜æŒºé¡ºåˆ©çš„ï¼Œè¿™é‡Œæˆ‘å°†è¿™ä¸ªè¿‡ç¨‹åˆ†äº«ç»™å¤§å®¶ã€‚

æˆ‘è¿™é‡Œä¸»è¦åˆ†äº«pythonä¸­çš„å¯¼åŒ…è§„èŒƒå’Œå†…å®¹è§„èŒƒç»Ÿä¸€çš„æ–¹æ³•ï¼Œåˆ†åˆ«ä½¿ç”¨åˆ°çš„ä¸¤ä¸ªå·¥å…·æ˜¯isortå’Œautopep8ï¼Œå½“ç„¶è¿™æ ·çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œè‡³äºä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸¤ä¸ªå·¥å…·ï¼šç¬¬ä¸€å¯¼åŒ…å·¥å…·çš„æ ¼å¼åŒ–æˆ‘åªæŸ¥åˆ°äº†isortè¿™ä¸€ä¸ªï¼Œç¬¬äºŒautopep8æ˜¯æ ¹æ®[pep 8](https://peps.python.org/pep-0008/)è¿™ä¸ªæè®®å¼€å‘çš„ï¼Œç›¸å¯¹è¾ƒå®˜æ–¹ã€‚åŒæ—¶æˆ‘ä¹Ÿä¼šåˆ†äº«å¦‚ä½•åœ¨gitä¸­å¦‚ä½•ä½¿ç”¨è¿™ä¸¤ä¸ªå·¥å…·ï¼Œè®©ä½ æ¯æ¬¡éƒ½èƒ½æäº¤è§„èŒƒç»Ÿä¸€çš„ä»£ç ï¼Œè¿™é‡Œä¸»è¦ä¼šç”¨åˆ°pre- commitè¿™ä¸ªå·¥å…·ã€‚

## isort

isortçš„å®˜æ–¹ä»‹ç»ï¼šisort is a Python utility / library to sort imports alphabetically, and automatically separated into sections and by type. It provides a command line utility, Python library and [plugins for various editors](https://github.com/pycqa/isort/wiki/isort-Plugins) to quickly sort all your imports. It requires Python 3.7+ to run but supports formatting Python 2 code too.

é€šè¿‡å®˜æ–¹ä»‹ç»æˆ‘ä»¬å¯ä»¥çŸ¥é“å¯¹æˆ‘ä»¬æœ‰ç”¨çš„å‡ ç‚¹ï¼š

* 1.å®ƒæ˜¯æŒ‰ç…§å­—æ¯é¡ºåºè¿›è¡Œæ’åºçš„ï¼ŒåŒæ—¶ä¹Ÿä¼šæ ¹æ®å¯¼å…¥çš„ç±»å‹ï¼ˆå†…ç½®åº“ï¼Œç¬¬ä¸‰æ–¹åº“ï¼Œè‡ªå·±çš„åº“ï¼‰æ¥è¿›è¡Œåˆ†ç±»æ’åº
* 2æ”¯æŒå‘½ä»¤è¡Œï¼ˆä¹Ÿèƒ½å†…åµŒä»£ç ï¼‰
* 3.pythonç‰ˆæœ¬è¦æ±‚3.7+ï¼Œpython2çš„ä»…æ”¯æŒæ ¼å¼åŒ–ï¼ˆisortæ—¢æ”¯æŒå¯¼åŒ…æ ¼å¼åŒ–ä¹Ÿæ”¯æŒå†…å®¹æ ¼å¼åŒ–ï¼‰

### æ’åºçš„è§„åˆ™

æ ¹æ®åŒ…çš„æ¥æºä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸ºå†…ç½®åº“ï¼Œç¬¬ä¸‰æ–¹åŒ…å’Œè‡ªå·±ç¼–å†™çš„åº“ï¼ŒæŒ‰ç…§å¯¼åŒ…çš„é£æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸º**from xxx import xxx**å’Œ**import xxx**ä¸¤ç§é£æ ¼ã€‚å› æ­¤æ’åºè§„åˆ™ä¸ºï¼šé¦–å…ˆæŒ‰ç…§åŒ…çš„æ¥æºï¼Œç„¶åæŒ‰ç…§å¯¼å…¥é£æ ¼ï¼Œæœ€åæ ¹æ®æŠ¥åæ¥è¿›è¡Œæ’åºï¼Œæ’åºåçš„ä»£ç æ ·å­é•¿æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

```python
from __future__ import absolute_import

import os
import sys

from third_party import (lib1, lib2, lib3, lib4, lib5, lib6, lib7, lib8,
lib9, lib10, lib11, lib12, lib13, lib14, lib15)

from my_lib import Object, Object2, Object3

print("Hey")
print("yo")
```

### ä½¿ç”¨

#### å®‰è£…

```python
pip install isort
```

#### å‘½ä»¤è¡Œä½¿ç”¨

å®˜æ–¹çš„ä¾‹å­å¾ˆå¥½ï¼Œæˆ‘è¿™é‡Œå°±ç›´æ¥è´´å‡ºå®˜æ–¹çš„ä¾‹å­æ¥ï¼š

![image.9814d010bced11ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/27/image.9814d010bced11ee9de617490ed73bd0.png)

## autopep8

ä¸Šé¢ä½¿ç”¨isortè¿›è¡Œäº†å¯¼åŒ…çš„è§„èŒƒï¼Œç°åœ¨æ¥ä½¿ç”¨autopep8æ¥è¿›è¡Œä»£ç å†…å®¹çš„è§„èŒƒã€‚
å®ƒå¥½åƒæ²¡æœ‰å®˜ç½‘ï¼Œä½†æ˜¯æœ‰å®˜æ–¹çš„githubä»“åº“ï¼š[ä¼ é€é—¨](https://github.com/hhatto/autopep8?tab=readme-ov-file#usage)ã€‚

å®˜æ–¹ä»‹ç»ï¼šautopep8 automatically formats Python code to conform to the [PEP 8](https://www.python.org/dev/peps/pep-0008/) style guide. It uses the [pycodestyle](https://github.com/PyCQA/pycodestyle) utility to determine what parts of the code needs to be formatted. autopep8 is capable of fixing most of the formatting [issues](https://pycodestyle.readthedocs.org/en/latest/intro.html#error-codes) that can be reported by pycodestyle.
é€šè¿‡å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¿¡æ¯æ˜¯ï¼šautoepep8ä¸»è¦å®ç°äº†å°†ä»£ç æ ¼å¼è½¬æˆpep8çš„æ ¼å¼ã€‚å®ƒå€ŸåŠ©äº†pycodestyleæ¥æ£€æŸ¥å“ªäº›éœ€è¦è½¬åŒ–ï¼Œç„¶åå®ƒè‡ªå·±å†å»æ‰§è¡Œè¿™äº›è½¬åŒ–ã€‚å…·ä½“çš„pep8è§„èŒƒå¤§å®¶å¯ä»¥å‚è€ƒä¸Šé¢çš„é“¾æ¥ã€‚

### ä½¿ç”¨

#### å®‰è£…

```python
pip install autopep8
```

#### å‘½ä»¤è¡Œä½¿ç”¨

å®ƒçš„ä½¿ç”¨ä¹Ÿå’Œisortä¸€æ ·æ–¹ä¾¿ï¼š

```shell
autopep8 filename
```

å®ƒçš„é…ç½®é¡¹æœ‰å¦‚ä¸‹è¿™äº›ï¼š
![image.a3792c0ebcf111ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/27/image.a3792c0ebcf111ee9de617490ed73bd0.png)
å…¶ä¸­æœ‰ä¸€ä¸ªéœ€è¦æåˆ°çš„é…ç½®å°±æ˜¯è¿™ä¸ª--max-line-length n,å®ƒæ˜¯ç”¨æ¥é™åˆ¶æ¯ä¸€è¡Œä»£ç çš„æœ€å¤§é•¿åº¦çš„ï¼Œé»˜è®¤æ˜¯79ä¸ªå­—ç¬¦çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¶…è¿‡äº†79ä¸ªå­—ç¬¦å°±ä¸æ»¡è¶³å®ƒçš„è¦æ±‚ï¼Œä¼šè¿›è¡Œæ ¼å¼åŒ–ã€‚ä½†æ˜¯å®é™…ä¸Šæˆ‘ä¸ªäººè§‰å¾—79æœ‰ç‚¹å¤ªçŸ­äº†ï¼Œæ ¼å¼åŒ–ä¹‹ååè€Œä¼šçœ‹ç€ä¸èˆ’æœï¼Œä¸çŸ¥é“å¤§å®¶ä¼šä¸ä¼šæœ‰è¿™ä¸ªæ„Ÿè§‰ã€‚

## gitæäº¤æ—¶è‡ªåŠ¨æ ¼å¼åŒ–

isortå’Œautopep8éƒ½æ”¯æŒå‘½ä»¤è¡Œå’Œä»£ç å†…ï¼ˆå¾ˆå°‘è¿™æ ·ä½¿ç”¨ï¼‰å®ç°ï¼Œä¸Šé¢ä¸»è¦åˆ†äº«äº†å‘½ä»¤è¡Œå†…çš„ä½¿ç”¨æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä¹Ÿæ”¯æŒåœ¨git commitæ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œè¿™æ ·å°±ä¸éœ€è¦æˆ‘ä»¬æ¯æ¬¡å†™å®Œä»£ç å†å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤è¿›è¡Œæ ¼å¼åŒ–äº†ã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨åˆ°å¦å¤–ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå°±æ˜¯ï¼špre-commitï¼Œå®˜æ–¹æ–‡æ¡£ä»‹ç»å¦‚ä¸‹ï¼š
![image.3f38e060bcf411ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/27/image.3f38e060bcf411ee9de617490ed73bd0.png)
å…¶ä¸­çº¢æ¡†æ˜¯æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„ç‚¹ï¼š

* 1.å®ƒä¼šåœ¨æ¯æ¬¡commitçš„æ—¶å€™è¿è¡Œä¸€äº›hooksï¼ˆè¿™é‡Œçš„hookså¯ä»¥ç†è§£æˆä¸Šé¢çš„å°å·¥å…·ï¼‰
* 2.å®ƒçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬ä¸“æ³¨åœ¨å†…å®¹ä¸Šï¼Œè€Œä¸æ˜¯æ ·å¼ï¼ˆæå‡æ•ˆç‡ï¼‰

### ä½¿ç”¨

#### å®‰è£…

```python
pip install pre-commit
```

#### é…ç½®

é…ç½®çš„æ­¥éª¤ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š

1. 1.åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªyamlæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºï¼š`.pre-commit-config.yaml`
2. 2.é…ç½®å†…å®¹ï¼Œæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚æœå¤åˆ¶ç²˜è´´å«Œå¤ªéº»çƒ¦çš„è¯å¯ä»¥ä½¿ç”¨`pre-commit sample-config > .pre-commit-config.yaml`å‘½ä»¤ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªæ ·æœ¬é…ç½®åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚

![image.e80bc272bd9711ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/28/image.e80bc272bd9711ee9de617490ed73bd0.png)

çŸ¥é“äº†å¦‚ä¸Šçš„é…ç½®è§„åˆ™åï¼Œé…ç½®isortå’Œautopep8å°±å®¹æ˜“å¾ˆå¤šäº†ï¼ä¸€èˆ¬å®˜ç½‘ä¹Ÿä¼šç»™å‡ºç›¸åº”çš„é…ç½®ï¼Œisortçš„é…ç½®å¦‚ä¸‹ï¼ˆ[å‚è€ƒé“¾æ¥](https://pycqa.github.io/isort/docs/configuration/pre-commit.html)ï¼‰ï¼š
ï¼ˆè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå®˜æ–¹é“¾æ¥ç»™å‡ºçš„æ ·ä¾‹ä¸­ç‰ˆæœ¬æŒ‡å®šçš„æ˜¯`5.11.2`ï¼Œä½†æ˜¯è¿™ä¸ªå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œ[æŒ‡å®šæ›´é«˜çš„ç‰ˆæœ¬å°±å¯ä»¥äº†](https://www.learnfk.com/question/python/75269700.html#google_vignette)ã€‚ï¼‰

```shell
-   repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        name: isort (python)
```

autopep8çš„é…ç½®ä¸isortç±»ä¼¼ï¼Œå¦‚ä¸‹ï¼š

```shell
- repo: https://github.com/hhatto/autopep8
  rev: 2.0.4  # select the tag or revision you want, or run `pre-commit autoupdate`
  hooks:
  - id: autopep8
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡pre-commitæ¥è¿è¡Œè¿™ä¸¤ä¸ªhookæ—¶ï¼Œæ—¢å¯ä»¥åœ¨`.pre-commit-config.yaml`æ–‡ä»¶ä¸­æŒ‡å®šå‚æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨å„è‡ªçš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå‚æ•°ï¼Œå„è‡ªçš„é…ç½®å¯ä»¥å‚è€ƒå®˜æ–¹ç½‘ç«™ï¼Œæˆ‘è¿™é‡Œåˆ†äº«ä¸€ä¸‹autopep8çš„é…ç½®ï¼Œautopep8åœ¨è¿è¡Œæ—¶ä¼šé»˜è®¤è¯»å–å…¨å±€é…ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šè¯»å–localçš„é…ç½®ï¼ˆå¦‚æœlocalæŒ‡å®šäº†çš„è¯ï¼‰
![image.fc2a10d0bd9f11ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/28/image.fc2a10d0bd9f11ee9de617490ed73bd0.png)
æˆ‘è¿™é‡Œåœ¨localæŒ‡å®šä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼š
![image.031f4ca0bda211ee9de617490ed73bd0.png](http://www.lll.plus/media/image/2024/01/28/image.031f4ca0bda211ee9de617490ed73bd0.png)

é€šè¿‡è¿™æ ·æŒ‡å®šåï¼Œä½ åœ¨å‘½ä»¤è¡Œè¿è¡Œautopep8æ—¶å°±ä¸éœ€è¦å†é¢å¤–æŒ‡å®šé…ç½®äº†ï¼Œå®ƒä¼šé»˜è®¤è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘æœ€åçš„`.pre-commit-config.yaml`æ–‡ä»¶æ˜¯ä¸‹é¢è¿™ä¸ªæ ·ï¼š

```shell
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
    - id: trailing-whitespace
    - id: end-of-file-fixer
    - id: check-yaml
    - id: check-added-large-files
# isortçš„é…ç½®
-   repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        name: isort (python)
# autopep8çš„é…ç½®
-   repo: https://github.com/hhatto/autopep8
    rev: v2.0.4  # select the tag or revision you want, or run `pre-commit autoupdate`
    hooks:
    - id: autopep8
      args: ["."]
```

#### å®‰è£…git hook scripts

ä¸Šé¢çš„é…ç½®ç®—æ˜¯å®Œæˆäº†æ‰€æœ‰çš„å‡†å¤‡å·¥ä½œï¼Œä½†æ˜¯å¦‚ä½•åœ¨commitæ—¶è‡ªåŠ¨è¿è¡Œè¿™ä¸¤ä¸ªhookï¼Œè¿˜éœ€è¦æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œé‚£å°±æ˜¯å®‰è£…git hook scriptsï¼Œè¿™ä¸ªæ­¥éª¤ä¹Ÿéå¸¸ç®€å•ï¼Œéœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¦‚ä¸‹ï¼š

```shell
pre-commit install
```

æ‰§è¡Œå®Œè¿™ä¸ªå‘½ä»¤åï¼Œä½ æ¯æ¬¡git commitæ—¶å°±ä¼šæ‰§è¡Œä¸Šé¢çš„ä¸¤ä¸ªhookå•¦ï¼å¦‚æœåœ¨commitæ—¶å‘ç°ä½ çš„ä»£ç ä¸ç¬¦åˆè§„èŒƒï¼Œå®ƒä¼šè‡ªåŠ¨ç»™ä½ ä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶å€™ä½ éœ€è¦é‡æ–°addå¹¶commitæ‰èƒ½æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

## æ€»ç»“

è¿™ç¯‡æ–‡ç« ä¸»è¦å›´ç»•ä»£ç è§„èŒƒç»Ÿä¸€ï¼Œä»‹ç»äº†ä¸¤ä¸ªå·¥å…·çš„ä½¿ç”¨æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯isortå’Œautopep8ï¼Œä»–ä»¬éƒ½æ˜¯é’ˆå¯¹pythonä»£ç é£æ ¼ç»Ÿä¸€çš„å·¥å…·ï¼Œå…¶ä¸­isortèƒ½å¤Ÿè§„èŒƒå¯¼åŒ…çš„é£æ ¼ï¼Œautopep8èƒ½å¤Ÿè§„èŒƒä»£ç å†…å®¹çš„é£æ ¼ï¼Œä»–ä»¬å„è‡ªéƒ½æ”¯æŒå‘½ä»¤è¡Œå’Œå†…åµŒä»£ç æ¥æ‰§è¡Œï¼Œæœ€åä»‹ç»åˆ°äº†pre-commitè¿™ä¸ªå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå°†å‰é¢ä¸¤ä¸ªå°å·¥å…·â€œæŒ‚è½½â€åˆ°gitä¸Šï¼Œä½¿å¾—æ¯æ¬¡æ‰§è¡Œgit commitå‘½ä»¤çš„æ—¶å€™éƒ½è‡ªåŠ¨å»æ‰§è¡Œæ ¼å¼åŒ–ã€‚è¿˜ç­‰ä»€ä¹ˆï¼Œå¿«å»è§„èŒƒä¸€ä¸‹ä½ çš„ä»£ç é£æ ¼å§ï¼ğŸ‘»

<ActionBox />

<style>#top-box {margin-top:0.5rem!important;}</style>
